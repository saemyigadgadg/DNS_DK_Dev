<!--
  @description       : 
  @author            : Hanyeong Choi
  @group             : 
  @last modified on  : 04-10-2025
  @last modified by  : Hanyeong Choi
  Modifications Log
  Ver   Date         Author          Modification
  1.0   06-20-2024   Hanyeong Choi   Initial Version
  1.0   06-21-2024   Hyerin Ro       Publish
-->
<aura:component implements="forceCommunity:availableForAllPageTypes,force:lightningquickactionwithoutheader,force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,force:hasSObjectName,force:lightningQuickAction,lightning:isUrlAddressable,lightning:actionOverride,lightning:hasPageReference,lightning:availableForFlowScreens"
                controller="DN_AccountController" 
                description="ì‚¬ì—…ìë²ˆí˜¸ ì§„ìœ„ í™•ì¸">

    <!-- ğŸš©Aura Attribute -->
    <aura:attribute name="isLoading"    type="Boolean"  default="false" />
    <aura:attribute name="isFlag"       type="Boolean"  default="false" />
    <aura:attribute name="isAlready"    type="Boolean"  default="false" />
    <aura:attribute name="resBody"      type="List"     default="[]" />
    <aura:attribute name="failResult"   type="String"   default="" />
    <aura:attribute name="status"       type="String"   default="" />

    <!-- ğŸš©Aura Handler -->
    <aura:handler name="init" value="{!this}" action="{! c.doInit }" />

    <lightning:overlayLibrary aura:id="overlayLib" />
    <aura:registerEvent name="modalEvent" type="c.DN_HandlerEvent" />

    <!-- ğŸš©Aura Style -->
    <aura:html tag="style">
        .slds-modal__container:has(.cDN_CheckAccountBusinessNumber) {
            width:100%;
            max-width: 40rem;
        }
        .slds-modal__content:has(.cDN_CheckAccountBusinessNumber) {
            height:auto !important;
            max-height:none !important;
            padding: 0;
            overflow-y: clip;
        }
        .forceChatterBasePublisher :not(.PHONE) .cuf-content:has(.cDN_CheckAccountBusinessNumber) {
            padding:0;
        }
    </aura:html>

    <div class="slds-modal__container">
        <!-- ğŸš©Modal Header -->
        <header class="slds-modal__header">
            <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">ì‚¬ì—…ìë²ˆí˜¸ ìƒíƒœ í™•ì¸</h2>
        </header>
        <!-- ğŸš©Modal Body -->
        <div class="slds-modal__content">
            <!-- ğŸš©Loading Spinner -->
            <aura:if isTrue="{! v.isLoading}">
                <lightning:spinner size="large" variant="brand" alternativeText="Loading" />
            </aura:if>
            
            <div class="modal_body">
                <aura:if isTrue="{! v.isAlready }">
                    <p class="main-content">ì´ë¯¸ ì‚¬ì—…ìë²ˆí˜¸ ì§„ìœ„ í™•ì¸ì„ ì™„ë£Œí•˜ì˜€ìŠµë‹ˆë‹¤.</p>
                </aura:if>
                <aura:if isTrue="{! v.isFlag }">
                    <p class="main-content">êµ­ì„¸ì²­ì— ë“±ë¡ë˜ì–´ ìˆëŠ” ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ì…ë‹ˆë‹¤.</p> <br />
                    <div class="modal_body-content">
                        <aura:iteration items="{!v.resBody}" var="item" indexVar="index">
                            <div class="table-wrap">
                                <table>
                                    <colgroup>
                                        <col width="30%" />
                                        <col width="70%" />
                                    </colgroup>
                                    <tbody>
                                        <tr>
                                            <th>ì‚¬ì—…ìë²ˆí˜¸</th>
                                            <td>{! item.b_no }</td>
                                        </tr>
                                        <tr>
                                            <th>ë‚©ì„¸ììƒíƒœ(ëª…ì¹­)</th>
                                            <td>{! item.b_stt }</td>
                                        </tr>
                                        <tr>
                                            <th>ê³¼ì„¸ìœ í˜•ë©”ì„¸ì§€(ëª…ì¹­)</th>
                                            <td>{! item.tax_type }</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </aura:iteration>
                    </div>

                    <aura:set attribute="else">
                        <aura:if isTrue="{! v.status == 'íì—…ì' }">
                            <p class="main-content">{! v.failResult }</p> <br />
                            <p class="main-content-e">íì—…í•œ ì‚¬ì—…ìë²ˆí˜¸ë¡œëŠ” ì¶”í›„ ì£¼ë¬¸ ìƒì„± ë¶ˆê°€ í•˜ì˜¤ë‹ˆ, ê³ ê°ì˜ ìœ íš¨í•œ ì‚¬ì—…ìë²ˆí˜¸ í™•ì¸ í›„ ì§„í–‰í•´ì£¼ì„¸ìš”.</p>

                            <aura:set attribute="else">
                                <p class="main-content">{! v.failResult }</p>
                            </aura:set>
                        </aura:if>
                    </aura:set>
                </aura:if>
            </div>
        </div>

        <!-- ğŸš©Modal Footer -->
        <footer class="slds-modal__footer">
            <button class="slds-button slds-button_neutral closeBtn" onclick="{!c.handleClose}">{!$Label.c.DNS_B_Close}</button>
            <button class="slds-button slds-button_brand closeBtn" onclick="{!c.handleConfirm}">{!$Label.c.DNS_B_Confirm}</button>
        </footer>
    </div>

</aura:component>