<!--
  @Description       : 
  @author            : suheon.ha
  @last modified on  : 05-08-2025
  @last modified by  : suheon.ha@UserSettingsUnder.SFDoc
-->
<template>
    <template if:true={isLoading}>
      <lightning-spinner alternative-text="Loading" size="medium"></lightning-spinner>
    </template>
    
    <div class="total-wrap">
      <!-- üçô 1. Ï≤≠Íµ¨Î∂ÄÌíà Î™©Î°ù ÌôîÎ©¥ -->
      
  
  
      <!-- üçô 2. Î∂ÄÌíàÏ∂îÍ∞Ä ÌôîÎ©¥ -->
      <template if:true={isAddPartView}>
        <div class="page-02">
  
          <!-- Result -->
          <div class="result-wrap">
            <template if:true={partList.length}>
              <!-- Valid Result -->
              <template for:each={partList} for:item="part">
                <div key={part.MATNR} class="valid-result">
                <!-- <div key={part.MATNR} class="valid-result" onclick={handleProductSelect}> -->
                  <div class="info-wrap">
                    <p>{cLabel.DNS_FSL_ProductNumber}: {part.MATNR}</p> <!--ÌíàÎ≤à-->
                    <p>{cLabel.DNS_FSL_ProductName}: {part.MAKTX}</p> <!--ÌíàÎ™Ö-->
                    <p>{cLabel.DNS_FSL_State}: {part.MATNR_TXT}</p> <!--ÏÉÅÌÉú-->
                    <p>{cLabel.DNS_C_DateOfReceipt}: {part.RECV_DT}</p> <!--Ï†ëÏàòÏùº-->
                    <p>{cLabel.DNS_FSL_PerformanceDueDate}: {part.PRETD3}</p> <!--ÌèâÍ∑†Ïã§Ï†ÅÎÇ©Í∏∞Ïùº-->
                    <p>{cLabel.DNS_FSL_ChangedSupplyDate}: {part.PRETD}</p> <!--Î≥ÄÍ≤ΩÍ≥µÍ∏âÏòàÏ†ïÏùº-->
                    <p>{cLabel.DNS_FSL_Quantity}: {part.KWMENG}</p> <!--ÏàòÎüâ-->
                    <p>{cLabel.DNS_FSL_SubmitDate}: {part.QDATU}</p> <!--Î∂àÏ∂úÏùº-->
                    <p>{cLabel.DNS_C_ProductRequestReturnStatus}: {part.RETURN_YN}</p> <!--Î∞òÎÇ©Ïó¨Î∂Ä-->
                  </div>
                  <div class="icon-wrap">
                    <lightning-icon icon-name='utility:chevronright' alternative-text='chevronright' size='x-small'
                      title='chevronright'></lightning-icon>
                  </div>
                </div>
              </template>
            </template>
            <!-- No Result -->
            <template if:false={partList.length}>
              <p class="no-result">{cLabel.DNS_FSL_ThereAreNoLookupResults}</p>
            </template>
          </div>
        </div>
      </template>
  
      <!-- üçô 3. Î∂ÄÌíàÏÉÅÏÑ∏ ÌôîÎ©¥ -->
    <template if:true={isPartDetailsView}>
      <div class="page-03">
        <!-- Back Button -->
        <div class="header">
          <div class="button-wrap">
            <lightning-button label={cLabel.DNS_FSL_Back} icon-name="utility:chevronleft" onclick={handleBack}></lightning-button>
          </div>
          <!-- <div class="button-wrap stock">
            <lightning-button variant="brand" label={cLabel.DNS_FSL_InventoryCheck} class="slds-m-left_x-small"></lightning-button>
          </div> -->
          <div class="error-msg slds-text-color_err">
            *{cLabel.DNS_FSL_PleaseEnterTheQuantity}
          </div>
        </div>
        
        <!-- Product Info -->
        <div class="field-wrap">

          <template if:true={dealerInventoryList.length}>
            <template for:each={dealerInventoryList} for:item="inven" >
              <div key={inven.Id} data-id={inven.Id}>
                <div class="input-container box">
                  <!-- ÌíàÎ≤à -->
                  <div class="input-wrap">
                    <p>{cLabel.DNS_FSL_ProductNumber}</p>
                    <lightning-input type="text" value={productDetails.ProductCode} readonly
                      variant="label-hidden"></lightning-input>
                  </div>
                  <!-- ÌíàÎ™Ö -->
                  <div class="input-wrap">
                    <p>{cLabel.DNS_FSL_ProductName}</p>
                    <div class="name">{productDetails.Name}</div>
                    <!-- <lightning-input type="text" value={productDetails.Name} readonly variant="label-hidden"></lightning-input> -->
                  </div>
                  <!-- Í∑úÍ≤© -->
                  <div class="input-wrap">
                    <p>{cLabel.DNS_FSL_Standard}</p>
                    <lightning-input type="text" value={productDetails.ProductSpec__c} readonly
                      variant="label-hidden"></lightning-input>
                  </div>
                  <!-- Îã®ÏúÑ -->
                  <div class="input-wrap">
                    <p>{cLabel.DNS_FSL_Unit}</p>
                    <lightning-input type="text" value={inven.MEINS} readonly
                      variant="label-hidden"></lightning-input>
                  </div>
                  <!-- ÎåÄÏ≤¥Ï†Ñ ÌåêÎß§Í∞Ä Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ -->
                  <div class="input-wrap">
                    <p>ÎåÄÏ≤¥Ï†Ñ ÌåêÎß§Í∞Ä</p>
                    <lightning-input type="text" value={productDetails.Alternate__c} readonly
                      variant="label-hidden"></lightning-input>
                  </div>
                  <!-- ÎåÄÏ≤¥Ìíà Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ -->
                  <div class="input-wrap">
                    <p>{cLabel.DNS_FSL_Replacement}</p>
                    <lightning-input type="text" value={inven.REPNR} readonly
                      variant="label-hidden"></lightning-input>
                  </div>
                  <!-- ÎåÄÏ≤¥Ìíà ÌåêÎß§Í∞Ä Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ -->
                  <div class="input-wrap">
                    <p>ÎåÄÏ≤¥Ìíà ÌåêÎß§Í∞Ä</p>
                    <lightning-input type="text" value={inven.NETPR} readonly
                      variant="label-hidden"></lightning-input>
                  </div>
                  <!-- Î≥∏ÏÇ¨Ïû¨Í≥†(ÎåÄÏ≤¥Ìíà) Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ -->
                  <div class="input-wrap">
                    <p>Ïû¨Í≥† ÏàòÎüâ</p>
                    <lightning-input type="text" value={inven.LABST} readonly
                      variant="label-hidden"></lightning-input>
                  </div>
                </div>
                <!-- == ÎåÄÎ¶¨Ï†êÏû¨Í≥† == -->
                <div class="divider">
                  <p>-------------------------------------- ÎåÄÎ¶¨Ï†ê Ïû¨Í≥† --------------------------------------</p>
                  <!-- <lightning-input type="text" value={productDetails.Alternate__c} readonly
                    variant="label-hidden"></lightning-input> -->
                </div>
              </div>
            </template>
            <template if:false={dealerInventoryList.length}>
              <p class="message">Ïû¨Í≥†Í∞Ä ÏóÜÏäµÎãàÎã§.</p>
            </template>
          </template>
          
          <!-- ÎÇòÏ§ëÏóê ÎåÄÎ¶¨Ï†êÏû¨Í≥† Ïò§Î∏åÏ†ùÌä∏ ÏÉùÍ∏∞Î©¥ Ïó¨Í∏∞Ïóê ÌíàÎ≤à or ÌíàÎ™ÖÏúºÎ°ú Ï°∞ÌöåÌï¥ÏÑú ÎÇòÌÉÄÎÇ¥Í∏∞ -->
          <template if:true={dealerStocksList.length}>
            <template for:each={dealerStocksList} for:item="inven">
                <div key={inven.Id} class="box" data-id={inven.Id}>
                    <div class="info-wrap">
                        <!-- No -->
                        <div class="input-wrap">
                          <p>No</p>
                          <lightning-input type="text" value={inven.Name} readonly variant="label-hidden"></lightning-input>
                        </div>
                        <!-- Dealer -->
                        <div class="input-wrap">
                          <p>Dealer</p>
                          <lightning-input type="text" value={inven.Dealer__r.Name} readonly variant="label-hidden"></lightning-input>
                        </div>
                        <!-- ÌòÑÏû¨Í≥† -->
                        <div class="input-wrap">
                          <p>ÌòÑÏû¨Í≥†</p>
                          <lightning-input type="text" value={inven.CurrentStockQuantity__c} readonly variant="label-hidden"></lightning-input>
                        </div>
                        <!-- Í∞ÄÏö©Ïû¨Í≥† -->
                        <div class="input-wrap">
                          <p>Í∞ÄÏö©Ïû¨Í≥†</p>
                          <lightning-input type="text" value={inven.AvailableQuantity__c} readonly variant="label-hidden"></lightning-input>
                        </div>
                        <!-- Ï£ºÎ¨∏ÏòàÏïΩÏû¨Í≥† -->
                        <div class="input-wrap">
                          <p>Ï£ºÎ¨∏ÏòàÏïΩÏû¨Í≥†</p>
                          <lightning-input type="text" value={inven.OrderRequiredQuantity__c} readonly variant="label-hidden"></lightning-input>
                        </div>
                    </div>
                </div>
            </template>
        </template>
        <template if:false={dealerStocksList.length}>
            <p class="message">Ïû¨Í≥†Í∞Ä ÏóÜÏäµÎãàÎã§.</p>
        </template>
        

        </div>
        <!-- Add Button -->
        <!-- Í∏∞Ï°¥ Ï∂îÍ∞ÄÎ≤ÑÌäº ÎàÑÎ•¥Î©¥ Î∞îÎ°ú Ï∂îÍ∞Ä -->
        <!-- <div class="add-button">
          <lightning-button variant="brand" label="Ï∂îÍ∞Ä" onclick={handleAddPart}></lightning-button>
        </div> -->
        <!-- Ï∂îÍ∞ÄÎ≤ÑÌäº ÎàÑÎ•¥Î©¥ Ïû¨ÌôïÏù∏ Î™®Îã¨ ÌëúÏãú -->
        <!-- <div class="add-button">
          <lightning-button variant="brand" label={cLabel.DNS_FSL_Add} onclick={openAddConfirmation}></lightning-button>
        </div> -->
      </div>
    </template>
  
      <!-- üçô 4. ÏïåÎ¶º ÌôîÎ©¥ Î™®Îã¨ -->
      <template if:true={isNotificationVisible}>
        <section role="alertdialog" tabindex="-1" class="slds-modal slds-fade-in-open">
          <div class="slds-modal__container">
            <header class="slds-modal__header">
              <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close"
                onclick={handleNotificationClose}>
                <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                <span class="slds-assistive-text">{cLabel.DNS_FSL_Close}</span>
              </button>
              <h2 class="slds-text-heading_medium">{cLabel.DNS_FSL_Alarm}</h2>
            </header>
            <div class="slds-modal__content slds-p-around_medium">
              <p>{cLabel.DNS_FSL_ThePartRequestHasBeenCompleted}</p>
            </div>
            <footer class="slds-modal__footer">
              <lightning-button variant="brand" label={cLabel.DNS_FSL_Check} onclick={handleNotificationClose}></lightning-button>
            </footer>
          </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
      </template>
  
      <!-- üçô 5. ÌôïÏù∏ Î™®Îã¨ -->
      <template if:true={isConfirmationVisible}>
        <div class="confirm-wrap">
          <section role="alertdialog" tabindex="-1" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
              <header class="slds-modal__header">
                <h2 class="slds-text-heading_medium">{cLabel.DNS_FSL_ConfirmationOfPartAddition}</h2>
              </header>
              <div class="slds-modal__content slds-p-around_medium">
                <div class="icon-wrap">
                  <lightning-icon icon-name='utility:check' alternative-text='check' size='medium' title='check'></lightning-icon>
                </div>
                <p style="font-size: 16px;">{cLabel.DNS_FSL_PleaseCheckQuantity}</p>
                <div class="quantity-wrap">
                  <span>{cLabel.DNS_FSL_Quantity}</span>
                  <span class="quantity">{quantity}</span>
                  <span>{cLabel.DNS_FSL_Dot}</span>
                </div>
              </div>
              <footer class="slds-modal__footer">
                <lightning-button variant="neutral" label={cLabel.DNS_FSL_Cancel} onclick={closeConfirmation}></lightning-button>
                <lightning-button variant="brand" label={cLabel.DNS_FSL_Check} onclick={handleAddPart}></lightning-button>
              </footer>
            </div>
          </section>
        </div>
        <div class="slds-backdrop slds-backdrop_open"></div>
      </template>
  
      <!-- 6. Ï∑®ÏÜå ÌôïÏù∏ Î™®Îã¨ -->
      <template if:true={isModalOpen}>
        <div class="confirm-wrap">
          <section role="alertdialog" tabindex="-1" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
              <header class="slds-modal__header">
                <h2 class="slds-text-heading_medium">{cLabel.DNS_FSL_ConfirmRequestCancellation}</h2>
              </header>
              <div class="slds-modal__content slds-p-around_medium">
                <div class="icon-wrap">
                  <lightning-icon icon-name='utility:check' alternative-text='check' size='medium' title='check'></lightning-icon>
                </div>
                <p style="font-size: 16px;">{cLabel.DNS_FSL_Check}</p>
              </div>
              <footer class="slds-modal__footer">
                <lightning-button variant="neutral" label={cLabel.DNS_FSL_Cancel} onclick={closeModal}></lightning-button>
                <lightning-button variant="brand" label={cLabel.DNS_FSL_CancelRequest} onclick={confirmCancelPart}></lightning-button>
              </footer>
            </div>
          </section>
        </div>
        <div class="slds-backdrop slds-backdrop_open"></div>
      </template>
  
  
  
    </div>
  </template>