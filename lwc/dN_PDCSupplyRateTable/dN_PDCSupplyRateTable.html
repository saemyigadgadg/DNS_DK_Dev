<!--
  @description       : 부품 대리점별 공급율
  @author            : 
  @group             : 
  @last modified on  : 01-10-2025
  @last modified by  : youjin.shim@sbtglobal.com
  Modifications Log
  Ver   Date         Author                        Modification
  1.0   01-07-2025   kyjung@yangwoodatapotion.com   화면적용
-->
<template>
  <template if:true={isLoading}>
    <lightning-spinner alternative-text="Loading" size="medium"></lightning-spinner>
  </template>
  
  <div class="table-wrap">
    <table class="slds-table slds-table_cell-buffer   slds-table_col-bordered IP-table">
      <thead>
        <tr class="slds-line-height_reset">
          <th class="" scope="col">
            <div class="slds-truncate" title="">대리점명</div>
          </th>
          <th class="" scope="col">
            <div class="slds-truncate" title="">주문일</div>
          </th>
          <th class="" scope="col">
            <div class="slds-truncate" title="">고객사명</div>
          </th>
          <th class="" scope="col">
            <div class="slds-truncate" title="">주문번호</div>
          </th>
          <th class="" scope="col">
            <div class="slds-truncate" title="">항목</div>
          </th>
          <th class="" scope="col">
            <div class="slds-truncate" title="">품번</div>
          </th>
          <th class="" scope="col">
            <div class="slds-truncate" title="">품명</div>
          </th>
          <th class="" scope="col">
            <div class="slds-truncate" title="">요청수량</div>
          </th>
          <th class="" scope="col">
            <div class="slds-truncate" title="">출고수량</div>
          </th>
          <th class="" scope="col">
            <div class="slds-truncate" title="">출고일</div>
          </th>
          <th class="" scope="col">
            <div class="slds-truncate" title="">소요일</div>
          </th>
          <th class="" scope="col">
            <div class="slds-truncate" title="">항목별 공급율</div>
          </th>
          <th class="" scope="col">
            <div class="slds-truncate" title="">주문별 공급율</div>
          </th>
        </tr>
      </thead>
      <tbody>
        <template for:each={processedSamples} for:item="sample" for:index="i">
          <tr key={sample.i}>
            <!-- 대리점명 rowspan -->
            
            <td  rowspan={sample.rowspan} class={sample.isHidden}>
              <div class="slds-text-align_center">{sample.dealerName}</div>
            </td>
            <!-- 주문일 rowspan -->
            <td  rowspan={sample.rowspan} class={sample.isHidden}>
              <div class="slds-text-align_center">{sample.orderDate}</div>
            </td>
            <!-- 고객사명 rowspan -->
            <td rowspan={sample.rowspan} class={sample.isHidden}>
              <div class="slds-text-align_left">{sample.customerName}</div>
            </td>
            <!-- 주문번호 rowspan -->
            <td rowspan={sample.rowspan} class={sample.isHidden}>
              <div class="slds-text-align_center">{sample.orderNumber}</div>
            </td>
            <td class="slds-text-align_center">{sample.orderItemNumber}</td>
            <td class="slds-text-align_left">{sample.partNumber}</td>
            <td class="slds-text-align_left">{sample.partName}</td>
            <td class="slds-text-align_right">{sample.orderQty}</td>
            <td class="slds-text-align_right">{sample.exportQty}</td>
            <td class="slds-text-align_center">{sample.exportDate}</td>
            <td class="slds-text-align_right">{sample.dateGap}</td>
            <!-- 항목별별 rowspan  -->
            <td rowspan={sample.itemRowspan} class={sample.itemRowHidden}>
              <div class="slds-text-align_right">{sample.perOrderItem}%</div>
            </td>
            <!-- 주문별별 rowspan -->
            <td rowspan={sample.rowspan} class={sample.isHidden}>
              <div class="slds-text-align_right">{sample.perOrder}%</div>
            </td>
          </tr>
        </template>
      </tbody>
    </table>
  </div>
  <div class="table-wrap tfoot-table">
    <table>
      <tfoot>
        <tr>
          <td colspan="7" class="right">
            <div>요청수량 합 : {totalOrderCnt}</div>
          </td>
          <td colspan="3" class="center">
            <div>1일 이내 출고수량 합 : {totalExportCnt}</div>
          </td>
          <td colspan="1" class="center">
            <div>평균</div>
          </td>
          <td colspan="1" class="right">
            <div>{totalOrderAvg}%</div>
          </td>
          <td colspan="1" class="right">
            <div>{totalExportAvg}%</div>
          </td>
        </tr>
        <tr>
          <td colspan="12" class="right">
            <div>아이템 수량별 공급율 합계</div>
          </td>
          <td colspan="1" class="right">
            <div>{totalEOAvg}%</div>
          </td>
        </tr>
      </tfoot>
    </table>
  </div>
</template>